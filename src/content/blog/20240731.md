---
isDraft: true
title: window.open returns null in safari
tags: [Javascript, safari, window.open]
thumbnail:
  src: https://images.unsplash.com/photo-1662328766056-7a61a2017fd0?q=80&w=2717&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
  alt: 썸네일
createdDate: 2024-07-31
topic: window.open이 왜 null을 return 할까요?
---

## TL;DR

window.open() method에 대해 크로스 브라우징을 점검하다 모바일 safari 환경에서 새 탭이 열리지 않는 이슈를 확인했습니다. 발생 원인과 해결한 경험을 공유드리겠습니다.

## 증상

![flow](/images/blog/20240731/flow.png)
구현한 flow는 위와 같이 되어있으며, 버튼 클릭 후 POST Request의 응답으로 백엔드에서 window.open의 인자로 들어가는 url을 받아오고 있었습니다. 구현당시부터 크로스 브라우징에 대해 전체적으로 확인을 했어야 하는데 데스크탑 Chrome, 데스크탑 Safari에서 잘 동작되는 것을 보고 문제가 없겠다 싶어 해당 feature를 종료하였습니다.

```javascript
const openLink = (url: string) => {
  if (typeof window === 'undefined') return;

  window.open(url, '_blank');
};
```

```javascript
const getBlankWindow = () => window.open('', '_blank');
const popup = getBlankWindow();
if (!popup) return;
if (data.landingUrl) popup.location.href = data.landingUrl;
else popup.close();
```
